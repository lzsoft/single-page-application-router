window.customElements.define("single-page-application-route",class extends HTMLElement{constructor(){super()}}),window.customElements.define("single-page-application-router",class extends HTMLElement{constructor(){super()}connectedCallback(){let e="",t={};new MutationObserver(function(e){for(let e of document.querySelectorAll("a:not([data-suppressed])"))e.setAttribute("data-suppressed",""),e.addEventListener("click",function(e){e.preventDefault(),window.history.pushState(!0,null,this.href),window.dispatchEvent(new Event("popstate"))})}).observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0});for(let e of this.querySelectorAll("single-page-application-route"))t[e.getAttribute("data-pattern")]=e.getAttribute("data-element");window.addEventListener("popstate",async()=>{if(e!==window.location.pathname){e=window.location.pathname;let n=1e3*parseFloat(window.getComputedStyle(this).getPropertyValue("--single-page-application-router-transition-time").replace("s",""));this.classList.add("fade"),await window.avalon.util.sleep(n),this.classList.add("disk"),this.classList.remove("fade");this.offsetTop;window.scroll(0,0),this.innerHTML="";let s=window.location.pathname,i="",a=Object.keys(t);for(let e=0;e<a.length;e++)s.indexOf(a[e])>=0&&(i=t[a[e]]);customElements.whenDefined(i).then(()=>{this.appendChild(new(customElements.get(i)))}),this.classList.remove("disk")}}),window.addEventListener("load",e=>{window.dispatchEvent(new Event("popstate"))})}});